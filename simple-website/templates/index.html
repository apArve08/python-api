<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemini AI Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="/static/style.css">
    <style>
        /* Dark mode variables */
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f9fafb;
            --bg-tertiary: #f3f4f6;
            --text-primary: #111827;
            --text-secondary: #6b7280;
            --border-color: #e5e7eb;
            --card-bg: #ffffff;
            --gradient-start: #667eea;
            --gradient-end: #764ba2;
        }

        .dark-mode {
            --bg-primary: #1f2937;
            --bg-secondary: #111827;
            --bg-tertiary: #374151;
            --text-primary: #f9fafb;
            --text-secondary: #d1d5db;
            --border-color: #4b5563;
            --card-bg: #1f2937;
        }

        body {
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .card-bg {
            background-color: var(--card-bg);
            transition: background-color 0.3s ease;
        }

        .text-secondary {
            color: var(--text-secondary);
        }

        .border-custom {
            border-color: var(--border-color);
        }

        .chat-scroll {
            scrollbar-width: thin;
            scrollbar-color: rgba(155, 155, 155, 0.5) transparent;
        }
        .chat-scroll::-webkit-scrollbar {
            width: 6px;
        }
        .chat-scroll::-webkit-scrollbar-track {
            background: transparent;
        }
        .chat-scroll::-webkit-scrollbar-thumb {
            background-color: rgba(155, 155, 155, 0.5);
            border-radius: 20px;
        }
        .message-enter {
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .typing-indicator {
            display: inline-flex;
            gap: 4px;
        }
        .typing-indicator span {
            width: 8px;
            height: 8px;
            background: #6366f1;
            border-radius: 50%;
            animation: bounce 1.4s infinite ease-in-out;
        }
        .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }
        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }
        .gradient-bg {
            background: linear-gradient(135deg, var(--gradient-start) 0%, var(--gradient-end) 100%);
        }
        pre code {
            border-radius: 8px;
            display: block;
            padding: 1rem;
        }
        .quick-action-card {
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .quick-action-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        .dark-mode .quick-action-card:hover {
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="gradient-bg shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <i class="fas fa-robot text-white text-2xl mr-3"></i>
                    <span class="text-white text-xl font-bold">Arveend's Gemini AI Hub</span>
                </div>
                <div class="flex space-x-4">
                    <button onclick="showSection('chat')" class="nav-btn text-white hover:bg-white/20 px-4 py-2 rounded-lg transition">
                        <i class="fas fa-comments mr-2"></i>Chat
                    </button>
                    <button onclick="showSection('quickactions')" class="nav-btn text-white hover:bg-white/20 px-4 py-2 rounded-lg transition">
                        <i class="fas fa-bolt mr-2"></i>Quick Actions
                    </button>
                    <button onclick="showSection('devtools')" class="nav-btn text-white hover:bg-white/20 px-4 py-2 rounded-lg transition">
                        <i class="fas fa-code mr-2"></i>Dev Tools
                    </button>
                    <button onclick="showSection('quote')" class="nav-btn text-white hover:bg-white/20 px-4 py-2 rounded-lg transition">
                        <i class="fas fa-quote-left mr-2"></i>Quote
                    </button>
                    <button onclick="showSection('summarize')" class="nav-btn text-white hover:bg-white/20 px-4 py-2 rounded-lg transition">
                        <i class="fas fa-file-alt mr-2"></i>Summarize
                    </button>
                    <button onclick="showSection('code')" class="nav-btn text-white hover:bg-white/20 px-4 py-2 rounded-lg transition">
                        <i class="fas fa-code mr-2"></i>Code
                    </button>
                    <button onclick="showSection('ideas')" class="nav-btn text-white hover:bg-white/20 px-4 py-2 rounded-lg transition">
                        <i class="fas fa-lightbulb mr-2"></i>Ideas
                    </button>
                    <button onclick="toggleDarkMode()" class="text-white hover:bg-white/20 px-4 py-2 rounded-lg transition">
                        <i id="theme-icon" class="fas fa-moon"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Chat Section -->
    <div id="chat-section" class="max-w-5xl mx-auto mt-8 px-4">
        <div class="card-bg rounded-2xl shadow-xl overflow-hidden">
            <!-- Chat Header -->
            <div class="bg-gradient-to-r from-indigo-500 to-purple-600 p-4 flex justify-between items-center">
                <div class="flex items-center">
                    <i class="fas fa-comments text-white text-xl mr-3"></i>
                    <h2 class="text-white text-xl font-semibold">AI Chat Assistant</h2>
                </div>
                <button onclick="clearChat()" class="bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg transition flex items-center">
                    <i class="fas fa-trash-alt mr-2"></i>Clear Chat
                </button>
            </div>

            <!-- Chat Box -->
            <div id="chat-box" class="h-[500px] overflow-y-auto p-6 space-y-4 chat-scroll" style="background-color: var(--bg-secondary);">
                <div class="text-center py-8" style="color: var(--text-secondary);">
                    <i class="fas fa-robot text-6xl mb-4 text-indigo-400"></i>
                    <p class="text-lg">Start a conversation with Gemini AI!</p>
                </div>
            </div>

            <!-- Input Area -->
            <div class="p-4 border-t border-custom">
                <div class="flex space-x-2">
                    <input 
                        type="text" 
                        id="user-input" 
                        placeholder="Type your message..." 
                        class="flex-1 px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 card-bg border-custom"
                        onkeypress="if(event.key === 'Enter') sendMessage()"
                    />
                    <button 
                        onclick="sendMessage()" 
                        class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-lg transition flex items-center font-semibold"
                    >
                        <i class="fas fa-paper-plane mr-2"></i>Send
                    </button>
                </div>
            </div>
        </div>
    </div>

    
    <!-- Dev Tools Section -->
    <div id="devtools-section" class="section-wrapper hidden">
        <div class="content-section">
            <div class="card-bg rounded-2xl shadow-xl p-8">
                <div class="text-center mb-8">
                    <i class="fas fa-laptop-code text-6xl text-blue-400 mb-4"></i>
                    <h2 class="text-3xl font-bold">Developer Tools</h2>
                    <p class="text-secondary mt-2">Professional tools to accelerate your development workflow</p>
                </div>
                
                <!-- Tool Selector Tabs -->
                <div class="flex gap-4 mb-6 border-b border-custom pb-4">
                    <button onclick="switchDevTool('readme')" id="readme-tab" class="dev-tool-tab px-6 py-3 rounded-t-lg font-semibold bg-indigo-600 text-white">
                        <i class="fas fa-book mr-2"></i>README Generator
                    </button>
                    <button onclick="switchDevTool('commenter')" id="commenter-tab" class="dev-tool-tab px-6 py-3 rounded-t-lg font-semibold hover:bg-gray-100 dark:hover:bg-gray-700">
                        <i class="fas fa-comment-dots mr-2"></i>Code Commenter
                    </button>
                    <button onclick="switchDevTool('designer')" id="designer-tab" class="dev-tool-tab px-6 py-3 rounded-t-lg font-semibold hover:bg-gray-100 dark:hover:bg-gray-700">
                        <i class="fas fa-project-diagram mr-2"></i>System Designer
                    </button>
                </div>

                <!-- README Generator Tool -->
                <div id="readme-tool" class="dev-tool-content">
                    <div class="mb-6">
                        <h3 class="text-xl font-bold mb-4">ðŸ“š Generate Professional README</h3>
                        <p class="text-secondary mb-4">Paste your code and get a comprehensive README.md file</p>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block mb-2 font-semibold">Project Name (Optional)</label>
                                <input 
                                    type="text" 
                                    id="readme-project-name" 
                                    placeholder="My Awesome Project"
                                    class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 card-bg border-custom"
                                />
                            </div>
                            
                            <div>
                                <label class="block mb-2 font-semibold">Brief Description (Optional)</label>
                                <input 
                                    type="text" 
                                    id="readme-description" 
                                    placeholder="A web application for managing tasks..."
                                    class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 card-bg border-custom"
                                />
                            </div>
                            
                            <div>
                                <label class="block mb-2 font-semibold">Your Code</label>
                                <textarea 
                                    id="readme-code-input" 
                                    placeholder="Paste your main code file here (app.py, index.js, etc.)..."
                                    class="w-full h-64 p-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono text-sm resize-none card-bg border-custom"
                                ></textarea>
                            </div>
                        </div>
                        
                        <button 
                            onclick="generateReadme()" 
                            class="w-full mt-4 bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-lg transition font-semibold"
                        >
                            <i class="fas fa-magic mr-2"></i>Generate README.md
                        </button>
                        
                        <div id="readme-result" class="mt-6 hidden">
                            <div class="flex justify-between items-center mb-3">
                                <h3 class="text-xl font-semibold">Generated README:</h3>
                                <button onclick="copyReadme()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg">
                                    <i class="fas fa-copy mr-2"></i>Copy
                                </button>
                            </div>
                            <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-6 overflow-auto max-h-96" id="readme-content"></div>
                        </div>
                    </div>
                </div>

                <!-- Code Commenter Tool -->
                <div id="commenter-tool" class="dev-tool-content hidden">
                    <div class="mb-6">
                        <h3 class="text-xl font-bold mb-4">ðŸ’¬ Add Professional Comments</h3>
                        <p class="text-secondary mb-4">Automatically add clear, helpful comments to your code</p>
                        
                        <div class="space-y-4">
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block mb-2 font-semibold">Programming Language</label>
                                    <select 
                                        id="commenter-language" 
                                        class="w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 card-bg border-custom"
                                    >
                                        <option value="python">Python</option>
                                        <option value="javascript">JavaScript</option>
                                        <option value="java">Java</option>
                                        <option value="cpp">C++</option>
                                        <option value="php">PHP</option>
                                        <option value="ruby">Ruby</option>
                                        <option value="go">Go</option>
                                        <option value="rust">Rust</option>
                                        <option value="typescript">TypeScript</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block mb-2 font-semibold">Comment Level</label>
                                    <select 
                                        id="commenter-level" 
                                        class="w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 card-bg border-custom"
                                    >
                                        <option value="basic">Basic - Minimal comments</option>
                                        <option value="medium" selected>Medium - Balanced</option>
                                        <option value="detailed">Detailed - Comprehensive</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div>
                                <label class="block mb-2 font-semibold">Your Code</label>
                                <textarea 
                                    id="commenter-code-input" 
                                    placeholder="Paste your code here..."
                                    class="w-full h-64 p-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono text-sm resize-none card-bg border-custom"
                                ></textarea>
                            </div>
                        </div>
                        
                        <button 
                            onclick="addComments()" 
                            class="w-full mt-4 bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-lg transition font-semibold"
                        >
                            <i class="fas fa-comment-medical mr-2"></i>Add Comments
                        </button>
                        
                        <div id="commenter-result" class="mt-6 hidden">
                            <div class="flex justify-between items-center mb-3">
                                <h3 class="text-xl font-semibold">Commented Code:</h3>
                                <button onclick="copyCommentedCode()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg">
                                    <i class="fas fa-copy mr-2"></i>Copy
                                </button>
                            </div>
                            <pre class="bg-gray-50 dark:bg-gray-800 rounded-lg p-6 overflow-auto max-h-96"><code id="commenter-content" class="language-python"></code></pre>
                        </div>
                    </div>
                </div>

                <!-- System Designer Tool -->
                <div id="designer-tool" class="dev-tool-content hidden">
                    <div class="mb-6">
                        <h3 class="text-xl font-bold mb-4">ðŸŽ¨ Software Design & Planning</h3>
                        <p class="text-secondary mb-4">Generate architecture diagrams and comprehensive design documents</p>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block mb-2 font-semibold">Diagram Type</label>
                                <select 
                                    id="designer-type" 
                                    class="w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 card-bg border-custom"
                                >
                                    <option value="architecture">System Architecture</option>
                                    <option value="database">Database Schema (ER Diagram)</option>
                                    <option value="flowchart">Process Flowchart</option>
                                    <option value="sequence">Sequence Diagram</option>
                                    <option value="class">Class Diagram (UML)</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block mb-2 font-semibold">Project Description</label>
                                <textarea 
                                    id="designer-description" 
                                    placeholder="Describe your project, its features, and requirements...

Example: 'An e-commerce web application where users can browse products, add to cart, make payments, and track orders. Admin panel for managing inventory and orders. Need user authentication, payment gateway integration, and real-time notifications.'"
                                    class="w-full h-48 p-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none card-bg border-custom"
                                ></textarea>
                            </div>
                        </div>
                        
                        <button 
                            onclick="designSystem()" 
                            class="w-full mt-4 bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-lg transition font-semibold"
                        >
                            <i class="fas fa-drafting-compass mr-2"></i>Generate Design Document
                        </button>
                        
                        <div id="designer-result" class="mt-6 hidden">
                            <div class="flex justify-between items-center mb-3">
                                <h3 class="text-xl font-semibold">Design Document:</h3>
                                <button onclick="copyDesign()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg">
                                    <i class="fas fa-copy mr-2"></i>Copy
                                </button>
                            </div>
                            <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-6 overflow-auto max-h-96" id="designer-content"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Actions Section -->
    <div id="quickactions-section" class="section-wrapper hidden">
        <div class="content-section">
            <div class="card-bg rounded-2xl shadow-xl p-8">
            <div class="text-center mb-8">
                <i class="fas fa-bolt text-6xl text-yellow-400 mb-4"></i>
                <h2 class="text-3xl font-bold">Quick Actions</h2>
                <p class="text-secondary mt-2">Get instant AI-powered suggestions for your day</p>
            </div>
            
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                <button onclick="quickAction('sport')" class="quick-action-card p-6 bg-gradient-to-br from-red-50 to-orange-50 dark:from-red-900/20 dark:to-orange-900/20 rounded-xl text-center">
                    <i class="fas fa-running text-4xl text-red-500 mb-3"></i>
                    <p class="font-semibold">Sport</p>
                    <p class="text-xs text-secondary mt-1">Workout ideas</p>
                </button>
                
                <button onclick="quickAction('food')" class="quick-action-card p-6 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl text-center">
                    <i class="fas fa-utensils text-4xl text-green-500 mb-3"></i>
                    <p class="font-semibold">Food</p>
                    <p class="text-xs text-secondary mt-1">Meal suggestions</p>
                </button>
                
                <button onclick="quickAction('education')" class="quick-action-card p-6 bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-xl text-center">
                    <i class="fas fa-graduation-cap text-4xl text-blue-500 mb-3"></i>
                    <p class="font-semibold">Education</p>
                    <p class="text-xs text-secondary mt-1">Learn something new</p>
                </button>
                
                <button onclick="quickAction('entertainment')" class="quick-action-card p-6 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl text-center">
                    <i class="fas fa-film text-4xl text-purple-500 mb-3"></i>
                    <p class="font-semibold">Entertainment</p>
                    <p class="text-xs text-secondary mt-1">Movies & shows</p>
                </button>
                
                <button onclick="quickAction('productivity')" class="quick-action-card p-6 bg-gradient-to-br from-indigo-50 to-blue-50 dark:from-indigo-900/20 dark:to-blue-900/20 rounded-xl text-center">
                    <i class="fas fa-tasks text-4xl text-indigo-500 mb-3"></i>
                    <p class="font-semibold">Productivity</p>
                    <p class="text-xs text-secondary mt-1">Efficiency tips</p>
                </button>
                
                <button onclick="quickAction('wellness')" class="quick-action-card p-6 bg-gradient-to-br from-pink-50 to-rose-50 dark:from-pink-900/20 dark:to-rose-900/20 rounded-xl text-center">
                    <i class="fas fa-spa text-4xl text-pink-500 mb-3"></i>
                    <p class="font-semibold">Wellness</p>
                    <p class="text-xs text-secondary mt-1">Self-care ideas</p>
                </button>
                
                <button onclick="quickAction('hobby')" class="quick-action-card p-6 bg-gradient-to-br from-yellow-50 to-amber-50 dark:from-yellow-900/20 dark:to-amber-900/20 rounded-xl text-center">
                    <i class="fas fa-palette text-4xl text-yellow-500 mb-3"></i>
                    <p class="font-semibold">Hobby</p>
                    <p class="text-xs text-secondary mt-1">Creative activities</p>
                </button>
                
                <button onclick="quickAction('travel')" class="quick-action-card p-6 bg-gradient-to-br from-teal-50 to-cyan-50 dark:from-teal-900/20 dark:to-cyan-900/20 rounded-xl text-center">
                    <i class="fas fa-plane text-4xl text-teal-500 mb-3"></i>
                    <p class="font-semibold">Travel</p>
                    <p class="text-xs text-secondary mt-1">Destination ideas</p>
                </button>
            </div>
            
            <div id="quick-action-result" class="mt-6 hidden">
                <div class="card-bg border border-custom rounded-xl p-6" id="quick-action-content"></div>
            </div>
            </div>
        </div>
    </div>

    <!-- Quote Section -->
    <div id="quote-section" class="section-wrapper hidden">
        <div class="content-section" style="max-width: 800px;">
            <div class="card-bg rounded-2xl shadow-xl p-8">
            <div class="text-center mb-6">
                <i class="fas fa-quote-left text-6xl text-indigo-400 mb-4"></i>
                <h2 class="text-3xl font-bold">Daily Inspiration</h2>
                <p class="text-secondary mt-2">Get motivated with AI-generated quotes</p>
            </div>
            
            <div id="quote-display" class="bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-xl p-8 min-h-[200px] flex items-center justify-center text-center">
                <p class="text-secondary text-lg">Click the button below for inspiration! âœ¨</p>
            </div>
            
            <button 
                onclick="fetchQuote()" 
                class="w-full mt-6 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white px-6 py-4 rounded-lg transition font-semibold text-lg"
            >
                <i class="fas fa-magic mr-2"></i>Generate New Quote
            </button>
            </div>
        </div>
    </div>

    <!-- Summarize Section -->
    <div id="summarize-section" class="section-wrapper hidden">
        <div class="content-section" style="max-width: 900px;">
            <div class="card-bg rounded-2xl shadow-xl p-8">
            <div class="text-center mb-6">
                <i class="fas fa-file-alt text-6xl text-indigo-400 mb-4"></i>
                <h2 class="text-3xl font-bold">Text Summarizer</h2>
                <p class="text-secondary mt-2">Get concise summaries of long texts</p>
            </div>
            
            <textarea 
                id="summarize-input" 
                placeholder="Paste your text here to summarize..." 
                class="w-full h-64 p-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none card-bg border-custom"
            ></textarea>
            
            <button 
                onclick="summarizeText()" 
                class="w-full mt-4 bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-lg transition font-semibold"
            >
                <i class="fas fa-compress-alt mr-2"></i>Summarize
            </button>
            
            <div id="summary-result" class="mt-6 hidden">
                <h3 class="text-xl font-semibold mb-3">Summary:</h3>
                <div class="bg-indigo-50 dark:bg-indigo-900/20 rounded-lg p-6" id="summary-content"></div>
            </div>
            </div>
        </div>
    </div>

    <!-- Code Explainer Section -->
    <div id="code-section" class="section-wrapper hidden">
        <div class="content-section" style="max-width: 900px;">
            <div class="card-bg rounded-2xl shadow-xl p-8">
            <div class="text-center mb-6">
                <i class="fas fa-code text-6xl text-indigo-400 mb-4"></i>
                <h2 class="text-3xl font-bold">Code Explainer</h2>
                <p class="text-secondary mt-2">Understand code with AI explanations</p>
            </div>
            
            <select 
                id="code-language" 
                class="w-full mb-4 p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 card-bg border-custom"
            >
                <option value="python">Python</option>
                <option value="javascript">JavaScript</option>
                <option value="java">Java</option>
                <option value="cpp">C++</option>
                <option value="php">PHP</option>
                <option value="ruby">Ruby</option>
                <option value="go">Go</option>
            </select>
            
            <textarea 
                id="code-input" 
                placeholder="Paste your code here..." 
                class="w-full h-64 p-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono text-sm resize-none card-bg border-custom"
            ></textarea>
            
            <button 
                onclick="explainCode()" 
                class="w-full mt-4 bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-lg transition font-semibold"
            >
                <i class="fas fa-search mr-2"></i>Explain Code
            </button>
            
            <div id="explanation-result" class="mt-6 hidden">
                <h3 class="text-xl font-semibold mb-3">Explanation:</h3>
                <div class="bg-indigo-50 dark:bg-indigo-900/20 rounded-lg p-6" id="explanation-content"></div>
            </div>
            </div>
        </div>
    </div>

    <!-- Ideas Generator Section -->
    <div id="ideas-section" class="section-wrapper hidden">
        <div class="content-section" style="max-width: 800px;">
            <div class="card-bg rounded-2xl shadow-xl p-8">
            <div class="text-center mb-6">
                <i class="fas fa-lightbulb text-6xl text-yellow-400 mb-4"></i>
                <h2 class="text-3xl font-bold">Idea Generator</h2>
                <p class="text-secondary mt-2">Get creative project ideas instantly</p>
            </div>
            
            <div class="grid grid-cols-2 gap-4 mb-6">
                <button onclick="generateIdea('project')" class="p-6 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-xl transition text-center">
                    <i class="fas fa-project-diagram text-3xl text-blue-600 mb-2"></i>
                    <p class="font-semibold">Project Idea</p>
                </button>
                <button onclick="generateIdea('business')" class="p-6 bg-green-50 dark:bg-green-900/20 hover:bg-green-100 dark:hover:bg-green-900/30 rounded-xl transition text-center">
                    <i class="fas fa-briefcase text-3xl text-green-600 mb-2"></i>
                    <p class="font-semibold">Business Idea</p>
                </button>
                <button onclick="generateIdea('app')" class="p-6 bg-purple-50 dark:bg-purple-900/20 hover:bg-purple-100 dark:hover:bg-purple-900/30 rounded-xl transition text-center">
                    <i class="fas fa-mobile-alt text-3xl text-purple-600 mb-2"></i>
                    <p class="font-semibold">App Idea</p>
                </button>
                <button onclick="generateIdea('content')" class="p-6 bg-pink-50 dark:bg-pink-900/20 hover:bg-pink-100 dark:hover:bg-pink-900/30 rounded-xl transition text-center">
                    <i class="fas fa-pen text-3xl text-pink-600 mb-2"></i>
                    <p class="font-semibold">Content Idea</p>
                </button>
            </div>
            
            <div id="idea-result" class="mt-6 hidden">
                <div class="bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 rounded-xl p-6" id="idea-content"></div>
            </div>
            </div>
        </div>
    </div>

    <script>
        const sessionId = Date.now().toString();

        // Dark Mode Toggle
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const icon = document.getElementById('theme-icon');
            
            if (document.body.classList.contains('dark-mode')) {
                icon.className = 'fas fa-sun';
                localStorage.setItem('darkMode', 'enabled');
            } else {
                icon.className = 'fas fa-moon';
                localStorage.setItem('darkMode', 'disabled');
            }
        }

        // Load dark mode preference
        window.addEventListener('DOMContentLoaded', () => {
            const darkMode = localStorage.getItem('darkMode');
            if (darkMode === 'enabled') {
                document.body.classList.add('dark-mode');
                document.getElementById('theme-icon').className = 'fas fa-sun';
            }
        });

        function showSection(section) {
            ['chat-section', 'quickactions-section', 'devtools-section', 'quote-section', 'summarize-section', 'code-section', 'ideas-section'].forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });
            document.getElementById(section + '-section').classList.remove('hidden');
        }

        // Dev Tools Tab Switching
        function switchDevTool(tool) {
            // Hide all tool contents
            ['readme-tool', 'commenter-tool', 'designer-tool'].forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });
            
            // Remove active class from all tabs
            ['readme-tab', 'commenter-tab', 'designer-tab'].forEach(id => {
                const tab = document.getElementById(id);
                tab.classList.remove('bg-indigo-600', 'text-white');
                tab.classList.add('hover:bg-gray-100', 'dark:hover:bg-gray-700');
            });
            
            // Show selected tool and activate tab
            document.getElementById(tool + '-tool').classList.remove('hidden');
            const activeTab = document.getElementById(tool + '-tab');
            activeTab.classList.add('bg-indigo-600', 'text-white');
            activeTab.classList.remove('hover:bg-gray-100', 'dark:hover:bg-gray-700');
        }

        // README Generator
        async function generateReadme() {
            const code = document.getElementById("readme-code-input").value.trim();
            const projectName = document.getElementById("readme-project-name").value.trim();
            const description = document.getElementById("readme-description").value.trim();
            
            if (!code) {
                alert("Please paste your code!");
                return;
            }

            const resultDiv = document.getElementById("readme-result");
            const contentDiv = document.getElementById("readme-content");
            
            resultDiv.classList.remove("hidden");
            contentDiv.innerHTML = `
                <div class="flex items-center justify-center py-8">
                    <div class="typing-indicator">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                    <span class="ml-4">Generating comprehensive README...</span>
                </div>
            `;

            try {
                const response = await fetch("/generate_readme", {
                    method: "POST",
                    headers: {"Content-Type": "application/json"},
                    body: JSON.stringify({code, project_name: projectName, description})
                });

                const data = await response.json();
                
                if (data.error) {
                    contentDiv.innerHTML = `<p class="text-red-500">Error: ${data.error}</p>`;
                } else {
                    contentDiv.innerHTML = marked.parse(data.readme);
                }
            } catch (error) {
                contentDiv.innerHTML = `<p class="text-red-500">Failed to generate README. Please try again.</p>`;
            }
        }

        function copyReadme() {
            const content = document.getElementById("readme-content").innerText;
            navigator.clipboard.writeText(content).then(() => {
                alert("README copied to clipboard!");
            });
        }

        // Code Commenter
        async function addComments() {
            const code = document.getElementById("commenter-code-input").value.trim();
            const language = document.getElementById("commenter-language").value;
            const level = document.getElementById("commenter-level").value;
            
            if (!code) {
                alert("Please paste your code!");
                return;
            }

            const resultDiv = document.getElementById("commenter-result");
            const contentDiv = document.getElementById("commenter-content");
            
            resultDiv.classList.remove("hidden");
            contentDiv.textContent = "Analyzing code and adding comments...";
            contentDiv.className = `language-${language}`;

            try {
                const response = await fetch("/add_comments", {
                    method: "POST",
                    headers: {"Content-Type": "application/json"},
                    body: JSON.stringify({code, language, level})
                });

                const data = await response.json();
                
                if (data.error) {
                    contentDiv.textContent = `Error: ${data.error}`;
                } else {
                    // Clean the response - remove markdown code fences if present
                    let cleanCode = data.commented_code;
                    cleanCode = cleanCode.replace(/```[\w]*\n/g, '').replace(/```$/g, '').trim();
                    
                    contentDiv.textContent = cleanCode;
                    hljs.highlightElement(contentDiv);
                }
            } catch (error) {
                contentDiv.textContent = "Failed to add comments. Please try again.";
            }
        }

        function copyCommentedCode() {
            const content = document.getElementById("commenter-content").textContent;
            navigator.clipboard.writeText(content).then(() => {
                alert("Commented code copied to clipboard!");
            });
        }

        // System Designer
        async function designSystem() {
            const description = document.getElementById("designer-description").value.trim();
            const type = document.getElementById("designer-type").value;
            
            if (!description) {
                alert("Please describe your project!");
                return;
            }

            const resultDiv = document.getElementById("designer-result");
            const contentDiv = document.getElementById("designer-content");
            
            resultDiv.classList.remove("hidden");
            contentDiv.innerHTML = `
                <div class="flex items-center justify-center py-8">
                    <div class="typing-indicator">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                    <span class="ml-4">Creating design document and diagrams...</span>
                </div>
            `;

            try {
                const response = await fetch("/design_system", {
                    method: "POST",
                    headers: {"Content-Type": "application/json"},
                    body: JSON.stringify({description, type})
                });

                const data = await response.json();
                
                if (data.error) {
                    contentDiv.innerHTML = `<p class="text-red-500">Error: ${data.error}</p>`;
                } else {
                    contentDiv.innerHTML = marked.parse(data.design);
                }
            } catch (error) {
                contentDiv.innerHTML = `<p class="text-red-500">Failed to generate design. Please try again.</p>`;
            }
        }

        function copyDesign() {
            const content = document.getElementById("designer-content").innerText;
            navigator.clipboard.writeText(content).then(() => {
                alert("Design document copied to clipboard!");
            });
        }

        // Quick Actions Function
        async function quickAction(type) {
            const resultDiv = document.getElementById("quick-action-result");
            const contentDiv = document.getElementById("quick-action-content");
            
            resultDiv.classList.remove("hidden");
            contentDiv.innerHTML = `
                <div class="flex items-center justify-center py-8">
                    <div class="typing-indicator">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
            `;

            try {
                const response = await fetch("/quick_action", {
                    method: "POST",
                    headers: {"Content-Type": "application/json"},
                    body: JSON.stringify({type})
                });

                const data = await response.json();
                
                if (data.error) {
                    contentDiv.innerHTML = `<p class="text-red-500">Error: ${data.error}</p>`;
                } else {
                    contentDiv.innerHTML = marked.parse(data.suggestion);
                }
            } catch (error) {
                contentDiv.innerHTML = `<p class="text-red-500">Failed to fetch suggestion. Please try again.</p>`;
            }
        }

        async function sendMessage() {
            const input = document.getElementById("user-input");
            const message = input.value.trim();
            if (!message) return;

            addMessage("user", message);
            input.value = "";

            // Show typing indicator
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typing-indicator';
            typingDiv.className = 'bot-msg';
            typingDiv.innerHTML = `
                <div class="typing-indicator">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            `;
            document.getElementById('chat-box').appendChild(typingDiv);
            document.getElementById('chat-box').scrollTop = document.getElementById('chat-box').scrollHeight;

            try {
                const response = await fetch("/chat", {
                    method: "POST",
                    headers: {"Content-Type": "application/json"},
                    body: JSON.stringify({message, session_id: sessionId})
                });

                const data = await response.json();
                document.getElementById('typing-indicator').remove();
                
                if (data.error) {
                    addMessage("bot", "Sorry, I encountered an error: " + data.error);
                } else {
                    addMessage("bot", data.reply);
                }
            } catch (error) {
                document.getElementById('typing-indicator')?.remove();
                addMessage("bot", "Sorry, something went wrong. Please try again.");
            }
        }

        function addMessage(sender, text) {
            const chatBox = document.getElementById("chat-box");
            const msg = document.createElement("div");
            msg.className = sender === "user" ? "user-msg" : "bot-msg";
            msg.className += " message-enter";
            
            // Convert markdown to HTML for bot messages
            let formattedText = text;
            if (sender === "bot") {
                formattedText = marked.parse(text);
            }
            
            msg.innerHTML = formattedText;
            
            chatBox.appendChild(msg);
            
            // Highlight code blocks
            if (sender === "bot") {
                msg.querySelectorAll('pre code').forEach((block) => {
                    hljs.highlightElement(block);
                });
            }
            
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        async function clearChat() {
            if (confirm("Are you sure you want to clear the chat?")) {
                await fetch("/clear_chat", {
                    method: "POST",
                    headers: {"Content-Type": "application/json"},
                    body: JSON.stringify({session_id: sessionId})
                });
                document.getElementById("chat-box").innerHTML = "";
            }
        }

        async function fetchQuote() {
            const display = document.getElementById("quote-display");
            display.innerHTML = `
                <div class="typing-indicator mx-auto">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            `;
            
            const response = await fetch("/get_quote", { method: "POST" });
            const data = await response.json();
            
            display.innerHTML = `<p class="text-xl italic leading-relaxed">${data.quote}</p>`;
        }

        async function summarizeText() {
            const text = document.getElementById("summarize-input").value.trim();
            if (!text) {
                alert("Please enter some text to summarize!");
                return;
            }

            const resultDiv = document.getElementById("summary-result");
            const contentDiv = document.getElementById("summary-content");
            
            resultDiv.classList.remove("hidden");
            contentDiv.innerHTML = `
                <div class="typing-indicator">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            `;

            const response = await fetch("/summarize", {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({text})
            });

            const data = await response.json();
            contentDiv.innerHTML = `<p class="leading-relaxed">${data.summary}</p>`;
        }

        async function explainCode() {
            const code = document.getElementById("code-input").value.trim();
            const language = document.getElementById("code-language").value;
            
            if (!code) {
                alert("Please enter some code to explain!");
                return;
            }

            const resultDiv = document.getElementById("explanation-result");
            const contentDiv = document.getElementById("explanation-content");
            
            resultDiv.classList.remove("hidden");
            contentDiv.innerHTML = `
                <div class="typing-indicator">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            `;

            const response = await fetch("/explain_code", {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({code, language})
            });

            const data = await response.json();
            contentDiv.innerHTML = marked.parse(data.explanation);
        }

        async function generateIdea(category) {
            const resultDiv = document.getElementById("idea-result");
            const contentDiv = document.getElementById("idea-content");
            
            resultDiv.classList.remove("hidden");
            contentDiv.innerHTML = `
                <div class="typing-indicator">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            `;

            const response = await fetch("/generate_idea", {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({category})
            });

            const data = await response.json();
            contentDiv.innerHTML = marked.parse(data.idea);
        }

        // Initialize marked options
        marked.setOptions({
            breaks: true,
            gfm: true
        });
    </script>
</body>
</html>